<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Leshan et le standard Lightweight M2M à l&#39;EclipseCon | Greg. I/O</title>
<meta name="keywords" content="fr, eclipsecon, CoAP, leshan, M2M, lightweight, Toulouse">
<meta name="description" content="La semaine dernière, j&rsquo;étais à l&rsquo;EclipseCon qui se déroulait à Toulouse. Sponsor Bronze de cette édition Red Hat (mon entreprise) avait un stand. C&rsquo;est à cette occasion que j&rsquo;ai participé à un training concernant le protocole CoAP et notamment le standard LWM2M dispensé par Julien Vermillard de chez Sierra Wireless.
Le protocole CoAP
Le protocole CoAP pour Constrained Application Protocol  a été défini afin de répondre aux exigences très contraintes de l&rsquo;internet des objets IoT et de la communication Machine 2 Machine M2M à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante.
Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :">
<meta name="author" content="">
<link rel="canonical" href="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.26cca5596cf53898626a540511b92ee26f2bfa182bb8ac88d95536b8581f7899.css" integrity="sha256-JsylWWz1OJhialQFEbku4m8r&#43;hgruKyI2VU2uFgfeJk=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://gautric.github.io/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://gautric.github.io/android-icon-36x36.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://gautric.github.io/android-icon-36x36.png">
<link rel="apple-touch-icon" href="https://gautric.github.io/apple-icon-180x180.png">
<link rel="mask-icon" href="https://gautric.github.io/apple-icon-180x180.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Leshan et le standard Lightweight M2M à l&#39;EclipseCon" />
<meta property="og:description" content="La semaine dernière, j&rsquo;étais à l&rsquo;EclipseCon qui se déroulait à Toulouse. Sponsor Bronze de cette édition Red Hat (mon entreprise) avait un stand. C&rsquo;est à cette occasion que j&rsquo;ai participé à un training concernant le protocole CoAP et notamment le standard LWM2M dispensé par Julien Vermillard de chez Sierra Wireless.
Le protocole CoAP
Le protocole CoAP pour Constrained Application Protocol  a été défini afin de répondre aux exigences très contraintes de l&rsquo;internet des objets IoT et de la communication Machine 2 Machine M2M à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante.
Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-07-01T13:58:00+00:00" />
<meta property="article:modified_time" content="2015-07-01T13:58:00+00:00" /><meta property="og:site_name" content="Greg. I/O" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Leshan et le standard Lightweight M2M à l&#39;EclipseCon"/>
<meta name="twitter:description" content="La semaine dernière, j&rsquo;étais à l&rsquo;EclipseCon qui se déroulait à Toulouse. Sponsor Bronze de cette édition Red Hat (mon entreprise) avait un stand. C&rsquo;est à cette occasion que j&rsquo;ai participé à un training concernant le protocole CoAP et notamment le standard LWM2M dispensé par Julien Vermillard de chez Sierra Wireless.
Le protocole CoAP
Le protocole CoAP pour Constrained Application Protocol  a été défini afin de répondre aux exigences très contraintes de l&rsquo;internet des objets IoT et de la communication Machine 2 Machine M2M à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante.
Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :"/>
<meta name="twitter:site" content="@gautric_io"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blog",
      "item": "https://gautric.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Leshan et le standard Lightweight M2M à l'EclipseCon",
      "item": "https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Leshan et le standard Lightweight M2M à l'EclipseCon",
  "name": "Leshan et le standard Lightweight M2M à l\u0027EclipseCon",
  "description": "La semaine dernière, j\u0026rsquo;étais à l\u0026rsquo;EclipseCon qui se déroulait à Toulouse. Sponsor Bronze de cette édition Red Hat (mon entreprise) avait un stand. C\u0026rsquo;est à cette occasion que j\u0026rsquo;ai participé à un training concernant le protocole CoAP et notamment le standard LWM2M dispensé par Julien Vermillard de chez Sierra Wireless.\nLe protocole CoAP Le protocole CoAP pour Constrained Application Protocol a été défini afin de répondre aux exigences très contraintes de l\u0026rsquo;internet des objets IoT et de la communication Machine 2 Machine M2M à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante. Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :\n",
  "keywords": [
    "fr", "eclipsecon", "CoAP", "leshan", "M2M", "lightweight", "Toulouse"
  ],
  "articleBody": "La semaine dernière, j’étais à l’EclipseCon qui se déroulait à Toulouse. Sponsor Bronze de cette édition Red Hat (mon entreprise) avait un stand. C’est à cette occasion que j’ai participé à un training concernant le protocole CoAP et notamment le standard LWM2M dispensé par Julien Vermillard de chez Sierra Wireless.\nLe protocole CoAP Le protocole CoAP pour Constrained Application Protocol a été défini afin de répondre aux exigences très contraintes de l’internet des objets IoT et de la communication Machine 2 Machine M2M à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante. Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :\nNotion de resource via des URI Verbe ou methode identique, GET, POST, DELETE, PUT (au format binaire) Code retour similaire 2.01, 2.03, 4.01, 4.03, 4.04 (au format binaire) Fonctionnalités Voici rapidement les principales fonctionalités du protocole (extrait de la RFC 7252) :\nProtocole RESTful/web-like implementant l’ensemble des contraintes M2M, Basé sur UDP (gestion de confimation, unicast, multicast), Sécurité basé sur le Datagram Transport Layer Security version 1.2 (DTLS), Notion d’URI et Content-type, Message type Observe (mode push) Faible empreinte réseau concernant les headers et metadata (format binaire), Possibilité d’intégration d’un mécanisme de type proxy et cache, Mapping transparent CoAP \u003c–\u003e HTTP. Nous allons voir maintenant le standard LWM2M.\nLe standard LWM2M Le standard ajoute une couche d’abstraction au protocole CoAP permettant de gérer un certain nombre de problématique de l’Internet des Objets. En effet, les devices qui sont déployés dans le monde physique ont besoin de communiquer avec l’extérieur un certain nombre d’information. Ils (les devices) peuvent être relativement nombreux et nécessitent de pouvoir opérer des actions autres que les fonctionnalités pour lesquelles ils ont été conçus. Par exemple, il doit être possible de vérifier l’état de la batterie, rebooter le système, mettre à jour le firmware ou bien vérifier la valeur de tel ou tel attribut. Le standard s’occupe également de la gestion du parc des objets déployés avec des mécanismes de type :\nProvisionning des devices, Enregistrement des devices, Management des devices, Notification de changement. Definitions LWM2M défini un certain nombre de concepts permettant de gérer l’ensemble de son spectre de compétence. Pour cela il normalise la notion de Client, d’Object et de Resources. Un Client peut être vu comme le device déployé et il possède un certain nombre d’Object, chacun de ces Object regroupe une collection de Resources. Par exemple, un GPS est un Client qui va posséder plusieurs Objects et donc plusieurs Resources. Un Object va regrouper un concept bien précis i.e : la localisation de l’objet (Long, Lat, Alt, Temps, etc) ou bien les informations concernant le device proprement dit (Model number, Serial number, firmware version, battery Level, temps, Memoire etc…). Le serveur LWM2M peut interroger aussi bien en lecture qu’en écriture les Resources de ces Objects, il peut aussi demander l’exécution d’un traitement (reboot, shutdown, etc…). Et grâce à l’utilisation des URI, le serveur peut récupérer l’ensemble des informations de l’Object (/3/0 –\u003e Device) ou bien la valeur d’une Resource bien précise (/3/0/2 –\u003e Serial Number).\nL’OMA normalise un certain nombre d’Object avec un ensemble de Resources associées.\nObject Name id singleton Security 0 false Server 1 false Access Control 2 false Device 3 true Connectivity Monitoring 4 true Firmware 5 true Location 6 true Connectivity Statistics 7 true **Connectivity Statistics** Attribut id type R/W/E units SMS Tx Counter 0 int R SMS Rx Counter 1 int R Tx Data 2 int R Kilo-Bytes Rx Data 3 int R Kilo-Bytes Max Message Size 4 int R Byte Average Message Size 5 int R Byte StartOrReset 5 E IPSO Alliance propose quant à lui un certain nombre d’Objects de plus haut niveau (GPIO A/N, Illuminance, Temperature, Accelerometre). IPSO Illuminance (3301)\nAttribut id type R/W/E units Min Measured Value 5601 float R Max Measured Value 5602 float R Min Range Value 5603 float R Max Range Value 5604 float R Reset Min and Max Measured Values 5605 E Sensor Value 5606 float R Sensor Units 5607 string R Exemple Nous allons voir maintenant comment developper et utiliser notre le framework Leshan qui est l’implémentation du standard LWM2M de la Fondation Eclipse\nPour cela commencons par la classe GPIOClient. Cette classe contient deux sous-classes interessantes Device qui représente les metadonnées de l’objet réel et la classe GPIO qui represente un broche de sortie de type numerique (ici elle sera simplement simulée).\nVoici les captures d’écran du resultat lorsque le device s’enregistre au près du serveur.\nAprès un read de l’ensemble de la resource\nWarning\nL’instanciation de la GPIO / IPSO Digital Output se fait pour l’instant que depuis le serveur via une requete CREATE. Cette Fonctionnalité n’est pas encore présente directement depuis le client.\nWarning\nLes parametres ne sont pas encore bien envoyés lors de la création de l’objet, il est necessaire de les affecter/setter un par un.\njuil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.config.NetworkConfig createStandardWithFile INFOS: Loading standard properties from file Californium.properties juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.CoapServer start INFOS: Starting server juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.CoAPEndpoint start INFOS: Starting endpoint at /0.0.0.0:0 Registered with id: /rd/FU6hLfHTXZ Write value state : true Write value polarity : false Write value applicationType : Ma nouvelle LED Read value state : true Read value state : false Read value applicationType : Ma nouvelle LED Warning\nAttention, le projet est encore jeune. Certaines fonctionnalités ne sont pas encore implémentées\nConclusion Le standard LWM2M basé sur le protocole CoAP permet de résoudre un certain nombre de problématique de l’Internet des Objets. Il offre un bon mix entre le monde Web (RESTful) et le monde IoT (objet low-{cpu,battery,bantwith}). En conservant la simplicité du monde Web (Uri, ressource, method HTTP-like, etc…), il abaisse le ticket d’entré de l’internet des objets aux mondes des développeurs venant du Web. La sécurité n’est pas en reste avec l’implémentation de certain mécanisme ou protocole comme le DTLS. La prochaine étape de mon travail sera d’intégrer ce framework dans le projet Camel IoT Labs\nLiens Utiles Le training de Julien Une doc utilisée pour ce post La norme CoAP ",
  "wordCount" : "1023",
  "inLanguage": "en",
  "datePublished": "2015-07-01T13:58:00Z",
  "dateModified": "2015-07-01T13:58:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Greg. I/O",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gautric.github.io/apple-icon-180x180.png"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://gautric.github.io/" accesskey="h" title="Greg. I/O (Alt + H)">
                <img src="https://gautric.github.io/apple-icon-180x180.png" alt="" aria-label="logo"
                    height="35">Greg. I/O</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://gautric.github.io/apropos/" title="À Propos">
                    <span>À Propos</span>
                </a>
            </li>
            <li>
                <a href="https://gautric.github.io/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://gautric.github.io/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://gautric.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://gautric.github.io/blog/">Blog</a></div>
    <h1 class="post-title entry-hint-parent">
      Leshan et le standard Lightweight M2M à l&#39;EclipseCon
    </h1>
    <div class="post-meta"><span title='2015-07-01 13:58:00 +0000 UTC'>July 1, 2015</span>

</div>
  </header> 
  <div class="post-content"><p>La semaine dernière, j&rsquo;étais à l&rsquo;<a href="https://www.eclipsecon.org/france2015/">EclipseCon</a> qui se déroulait à Toulouse. Sponsor Bronze de cette édition <a href="https://www.redhat.com">Red Hat</a> (mon entreprise) avait <a href="https://www.flickr.com/groups/2812102@N25/pool/">un stand</a>. C&rsquo;est à cette occasion que j&rsquo;ai participé à un training concernant le protocole CoAP et notamment <a href="https://www.eclipsecon.org/france2015/session/hands-lightweight-m2m-run-smartwatch-internet-things">le standard LWM2M</a> dispensé par <a href="http://people.apache.org/~jvermillard/">Julien Vermillard</a> de chez <a href="http://www.sierrawireless.com/">Sierra Wireless</a>.</p>
<h2 id="le-protocole-coap">Le protocole CoAP<a hidden class="anchor" aria-hidden="true" href="#le-protocole-coap">#</a></h2>
<p>Le protocole <a href="http://coap.technology/"><strong>CoAP</strong></a> pour Constrained Application Protocol  a été défini afin de répondre aux exigences très contraintes de l&rsquo;internet des objets <em>IoT</em> et de la communication Machine 2 Machine <em>M2M</em> à savoir : faible puissance de calcul, faible consommation en énergie et faible bande passante.
Le protocole CoAP est le pendant M2M du protocole HTTP pour le web car on retrouve les mêmes concepts et la même terminologie :</p>
<ul>
<li>Notion de resource via des URI</li>
<li>Verbe ou methode identique, GET, POST, DELETE, PUT (au format binaire)</li>
<li>Code retour similaire 2.01, 2.03, 4.01, 4.03, 4.04 (au format binaire)</li>
</ul>
<h3 id="fonctionnalités">Fonctionnalités<a hidden class="anchor" aria-hidden="true" href="#fonctionnalités">#</a></h3>
<p>Voici rapidement les principales fonctionalités du protocole (extrait de la <a href="https://tools.ietf.org/html/rfc7252">RFC 7252</a>) :</p>
<ul>
<li>Protocole RESTful/<em>web-like</em> implementant l&rsquo;ensemble des contraintes M2M,</li>
<li>Basé sur UDP (gestion de confimation, unicast, multicast),</li>
<li>Sécurité basé sur le Datagram Transport Layer Security version 1.2 (DTLS),</li>
<li>Notion d&rsquo;URI et Content-type,</li>
<li>Message type Observe (mode push)</li>
<li>Faible empreinte réseau concernant les headers et metadata (format binaire),</li>
<li>Possibilité d&rsquo;intégration d&rsquo;un mécanisme de type proxy et cache,</li>
<li>Mapping transparent CoAP &lt;&ndash;&gt; HTTP.</li>
</ul>
<p>Nous allons voir maintenant le standard LWM2M.</p>
<h2 id="le-standard-lwm2m">Le standard LWM2M<a hidden class="anchor" aria-hidden="true" href="#le-standard-lwm2m">#</a></h2>
<p>Le standard ajoute une couche d&rsquo;abstraction au protocole CoAP permettant de gérer un certain nombre de problématique de l&rsquo;Internet des Objets. En effet, les devices qui sont déployés dans le monde physique ont besoin de communiquer avec l&rsquo;extérieur un certain nombre d&rsquo;information. Ils (les devices) peuvent être relativement nombreux et nécessitent de pouvoir opérer des actions autres que les fonctionnalités pour lesquelles ils ont été conçus. Par exemple, il doit être possible de vérifier l&rsquo;état de la batterie, rebooter le système, mettre à jour le firmware ou bien vérifier la valeur de tel ou tel attribut.
Le standard s&rsquo;occupe également de la gestion du parc des objets déployés avec des mécanismes de type :</p>
<ul>
<li>Provisionning des devices,</li>
<li>Enregistrement des devices,
<img src="/img/RDR.png" style="max-width:100%;" height="110" hspace="30"/></li>
<li>Management des devices,
<img src="/img/RWE.png" style="max-width:100%;"  height="110" hspace="30"/></li>
<li>Notification de changement.
<img src="/img/ONCO.png" style="max-width:100%;" height="110" hspace="30"/></li>
</ul>
<h3 id="definitions">Definitions<a hidden class="anchor" aria-hidden="true" href="#definitions">#</a></h3>
<p><a href="http://technical.openmobilealliance.org/Technical/technical-information/omna/lightweight-m2m-lwm2m-object-registry"><strong>LWM2M</strong></a> défini un certain nombre de concepts permettant de gérer l&rsquo;ensemble de son spectre de compétence. Pour cela il normalise la notion de <em>Client</em>, d&rsquo;<em>Object</em> et de <em>Resources</em>. Un <em>Client</em> peut être vu comme le device déployé et il possède un certain nombre d&rsquo;<em>Object</em>, chacun de ces <em>Object</em> regroupe une collection de <em>Resources</em>. Par exemple, un GPS est un <em>Client</em> qui va posséder plusieurs <em>Objects</em> et donc plusieurs <em>Resources</em>. Un <em>Object</em> va regrouper un concept bien précis i.e : la localisation de l&rsquo;objet (Long, Lat, Alt, Temps, etc) ou bien les informations concernant le device proprement dit (Model number, Serial number, firmware version, battery Level, temps, Memoire etc&hellip;). Le serveur LWM2M peut interroger aussi bien en lecture qu&rsquo;en écriture les <em>Resources</em> de ces <em>Objects</em>, il peut aussi demander l&rsquo;exécution d&rsquo;un traitement (reboot, shutdown, etc&hellip;). Et grâce à l&rsquo;utilisation des <em>URI</em>, le serveur peut récupérer l&rsquo;ensemble des informations de l&rsquo;<em>Object</em> (/3/0 &ndash;&gt; Device) ou bien la valeur d&rsquo;une <em>Resource</em> bien précise (/3/0/2 &ndash;&gt; Serial Number).</p>
<p>L&rsquo;OMA normalise un certain nombre d&rsquo;<em>Object</em> avec un ensemble de <em>Resources</em> associées.</p>
<table>
  <thead>
      <tr>
          <th>Object Name</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">singleton</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Security</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Server</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Access Control</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Device</td>
          <td style="text-align: center">3</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Connectivity Monitoring</td>
          <td style="text-align: center">4</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Firmware</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Location</td>
          <td style="text-align: center">6</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Connectivity Statistics</td>
          <td style="text-align: center">7</td>
          <td style="text-align: center">true</td>
      </tr>
  </tbody>
</table>
<br/>
**Connectivity Statistics**
<table>
  <thead>
      <tr>
          <th>Attribut</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">type</th>
          <th style="text-align: center">R/W/E</th>
          <th style="text-align: right">units</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>SMS Tx Counter</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>SMS Rx Counter</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Tx Data</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Kilo-Bytes</td>
      </tr>
      <tr>
          <td>Rx Data</td>
          <td style="text-align: center">3</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Kilo-Bytes</td>
      </tr>
      <tr>
          <td>Max Message Size</td>
          <td style="text-align: center">4</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Byte</td>
      </tr>
      <tr>
          <td>Average Message Size</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Byte</td>
      </tr>
      <tr>
          <td>StartOrReset</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center"></td>
          <td style="text-align: center">E</td>
          <td></td>
      </tr>
  </tbody>
</table>
<br/>
<p>IPSO Alliance propose quant à lui un certain nombre d&rsquo;<em>Objects</em> de plus haut niveau (GPIO A/N, Illuminance, Temperature, Accelerometre).
<br/><br/>
<strong>IPSO Illuminance (3301)</strong></p>
<table>
  <thead>
      <tr>
          <th>Attribut</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">type</th>
          <th style="text-align: center">R/W/E</th>
          <th>units</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Min Measured Value</td>
          <td style="text-align: center">5601</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Max Measured Value</td>
          <td style="text-align: center">5602</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Min Range Value</td>
          <td style="text-align: center">5603</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Max Range Value</td>
          <td style="text-align: center">5604</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Reset Min and Max Measured Values</td>
          <td style="text-align: center">5605</td>
          <td style="text-align: center"></td>
          <td style="text-align: center">E</td>
          <td></td>
      </tr>
      <tr>
          <td>Sensor Value</td>
          <td style="text-align: center">5606</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Sensor Units</td>
          <td style="text-align: center">5607</td>
          <td style="text-align: center">string</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h2 id="exemple">Exemple<a hidden class="anchor" aria-hidden="true" href="#exemple">#</a></h2>
<p>Nous allons voir maintenant comment developper et utiliser notre le framework <a href="https://github.com/eclipse/leshan"><em>Leshan</em></a> qui est l&rsquo;implémentation du standard LWM2M de la <a href="https://eclipse.org/org/"><em>Fondation Eclipse</em></a></p>
<p>Pour cela commencons par la classe GPIOClient. Cette classe contient deux sous-classes interessantes <strong>Device</strong> qui représente les metadonnées de l&rsquo;objet réel et la classe <strong>GPIO</strong> qui represente un broche de sortie de type numerique (ici elle sera simplement simulée).</p>
<script src="https://gist.github.com/gautric/9db1570898c3487f3829.js##file-gpioclient-java-L102"></script>
<p>Voici les captures d&rsquo;écran du resultat lorsque le device s&rsquo;enregistre au près du serveur.</p>
<img src="/img/leshan_1.png" style="max-width:75%;" />
<p>Après un read de l&rsquo;ensemble de la resource</p>
<img src="/img/leshan_2.png" style="max-width:75%;" />
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>L&rsquo;instanciation de la GPIO / IPSO Digital Output se fait pour l&rsquo;instant que depuis le serveur via une requete CREATE. Cette Fonctionnalité n&rsquo;est pas encore présente directement depuis le client.</p></div>

<img src="/img/leshan_3.png" style="max-width:75%;" />
<div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Les parametres ne sont pas encore bien envoyés lors de la création de l&rsquo;objet, il est necessaire de les affecter/setter un par un.</p></div>

<img src="/img/leshan_5.png" style="max-width:75%;" />
<pre tabindex="0"><code>juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.config.NetworkConfig createStandardWithFile
INFOS: Loading standard properties from file Californium.properties
juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.CoapServer start
INFOS: Starting server
juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.CoAPEndpoint start
INFOS: Starting endpoint at /0.0.0.0:0
Registered with id: /rd/FU6hLfHTXZ
Write value state : true
Write value polarity : false
Write value applicationType : Ma nouvelle LED
Read value state : true
Read value state : false
Read value applicationType : Ma nouvelle LED
</code></pre><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Attention, le projet est encore jeune. Certaines fonctionnalités ne sont pas encore implémentées</p></div>

<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Le standard <a href="http://technical.openmobilealliance.org/Technical/technical-information/omna/lightweight-m2m-lwm2m-object-registry"><strong>LWM2M</strong></a> basé sur le protocole <a href="http://coap.technology/"><strong>CoAP</strong></a> permet de résoudre un certain nombre de problématique de l&rsquo;Internet des Objets. Il offre un bon mix entre le monde Web <em>(RESTful)</em> et le monde IoT <em>(objet low-{cpu,battery,bantwith})</em>. En conservant la simplicité du monde Web (Uri, ressource, method HTTP-like, etc&hellip;), il abaisse le ticket d&rsquo;entré de l&rsquo;internet des objets aux mondes des développeurs venant du Web. La sécurité n&rsquo;est pas en reste avec l&rsquo;implémentation de certain mécanisme ou protocole comme le DTLS.
La prochaine étape de mon travail sera d&rsquo;intégrer ce framework dans le projet <a href="https://github.com/camel-labs/camel-labs"><strong>Camel IoT Labs</strong></a></p>
<h3 id="liens-utiles">Liens Utiles<a hidden class="anchor" aria-hidden="true" href="#liens-utiles">#</a></h3>
<ul>
<li><a href="http://fr.slideshare.net/jvermillard/hands-on-with-lightweight-m2m-and-leshan">Le training de Julien</a></li>
<li><a href="http://fr.slideshare.net/zdshelby/oma-lightweightm2-mtutorial">Une doc utilisée pour ce post</a></li>
<li><a href="http://coap.technology/">La norme CoAP</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://gautric.github.io/tags/fr/">Fr</a></li>
      <li><a href="https://gautric.github.io/tags/eclipsecon/">Eclipsecon</a></li>
      <li><a href="https://gautric.github.io/tags/coap/">CoAP</a></li>
      <li><a href="https://gautric.github.io/tags/leshan/">Leshan</a></li>
      <li><a href="https://gautric.github.io/tags/m2m/">M2M</a></li>
      <li><a href="https://gautric.github.io/tags/lightweight/">Lightweight</a></li>
      <li><a href="https://gautric.github.io/tags/toulouse/">Toulouse</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://gautric.github.io/blog/2015/07/03/wildfly-9.0-offline-cli-and-http/2/">
    <span class="title">« Prev</span>
    <br>
    <span>Wildfly 9.0 Offline CLI and HTTP/2</span>
  </a>
  <a class="next" href="https://gautric.github.io/blog/2015/06/18/java-regex-group-name/">
    <span class="title">Next »</span>
    <br>
    <span>Java Regex Group Name</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2016 - 2025 <a href="https://gautric.github.io/">Greg. I/O</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
