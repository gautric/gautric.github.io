<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Leshan et le standard Lightweight M2M à l&#39;EclipseCon | Greg. I/O</title>
<meta name="keywords" content="fr, eclipsecon, CoAP, leshan, M2M, lightweight, Toulouse">
<meta name="description" content="Découverte du protocole LWM2M pour l&rsquo;Internet des Objets
La semaine dernière, j&rsquo;ai eu l&rsquo;opportunité de participer à l&rsquo;EclipseCon qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, Red Hat (mon entreprise) était présente avec un stand pour échanger avec la communauté. C&rsquo;est dans ce cadre que j&rsquo;ai suivi une formation particulièrement enrichissante sur le protocole CoAP et le standard LWM2M dispensée par Julien Vermillard de chez Sierra Wireless, expert reconnu dans ce domaine.">
<meta name="author" content="">
<link rel="canonical" href="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8f91d8a03d2d03df35a93d161da5378cfcf6b504ad2ef312c29e142e3806a327.css" integrity="sha256-j5HYoD0tA981qT0WHaU3jPz2tQStLvMSwp4ULjgGoyc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://gautric.github.io/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://gautric.github.io/android-icon-36x36.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://gautric.github.io/android-icon-36x36.png">
<link rel="apple-touch-icon" href="https://gautric.github.io/apple-icon-180x180.png">
<link rel="mask-icon" href="https://gautric.github.io/apple-icon-180x180.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/">
  <meta property="og:site_name" content="Greg. I/O">
  <meta property="og:title" content="Leshan et le standard Lightweight M2M à l&#39;EclipseCon">
  <meta property="og:description" content="Découverte du protocole LWM2M pour l’Internet des Objets La semaine dernière, j’ai eu l’opportunité de participer à l’EclipseCon qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, Red Hat (mon entreprise) était présente avec un stand pour échanger avec la communauté. C’est dans ce cadre que j’ai suivi une formation particulièrement enrichissante sur le protocole CoAP et le standard LWM2M dispensée par Julien Vermillard de chez Sierra Wireless, expert reconnu dans ce domaine.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2015-07-01T13:58:00+00:00">
    <meta property="article:modified_time" content="2015-07-01T13:58:00+00:00">
    <meta property="article:tag" content="Fr">
    <meta property="article:tag" content="Eclipsecon">
    <meta property="article:tag" content="CoAP">
    <meta property="article:tag" content="Leshan">
    <meta property="article:tag" content="M2M">
    <meta property="article:tag" content="Lightweight">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leshan et le standard Lightweight M2M à l&#39;EclipseCon">
<meta name="twitter:description" content="Découverte du protocole LWM2M pour l&rsquo;Internet des Objets
La semaine dernière, j&rsquo;ai eu l&rsquo;opportunité de participer à l&rsquo;EclipseCon qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, Red Hat (mon entreprise) était présente avec un stand pour échanger avec la communauté. C&rsquo;est dans ce cadre que j&rsquo;ai suivi une formation particulièrement enrichissante sur le protocole CoAP et le standard LWM2M dispensée par Julien Vermillard de chez Sierra Wireless, expert reconnu dans ce domaine.">
      <meta name="twitter:site" content="@gautric_io">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blog",
      "item": "https://gautric.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Leshan et le standard Lightweight M2M à l'EclipseCon",
      "item": "https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Leshan et le standard Lightweight M2M à l'EclipseCon",
  "name": "Leshan et le standard Lightweight M2M à l\u0027EclipseCon",
  "description": "Découverte du protocole LWM2M pour l\u0026rsquo;Internet des Objets La semaine dernière, j\u0026rsquo;ai eu l\u0026rsquo;opportunité de participer à l\u0026rsquo;EclipseCon qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, Red Hat (mon entreprise) était présente avec un stand pour échanger avec la communauté. C\u0026rsquo;est dans ce cadre que j\u0026rsquo;ai suivi une formation particulièrement enrichissante sur le protocole CoAP et le standard LWM2M dispensée par Julien Vermillard de chez Sierra Wireless, expert reconnu dans ce domaine.\n",
  "keywords": [
    "fr", "eclipsecon", "CoAP", "leshan", "M2M", "lightweight", "Toulouse"
  ],
  "articleBody": "Découverte du protocole LWM2M pour l’Internet des Objets La semaine dernière, j’ai eu l’opportunité de participer à l’EclipseCon qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, Red Hat (mon entreprise) était présente avec un stand pour échanger avec la communauté. C’est dans ce cadre que j’ai suivi une formation particulièrement enrichissante sur le protocole CoAP et le standard LWM2M dispensée par Julien Vermillard de chez Sierra Wireless, expert reconnu dans ce domaine.\nLe protocole CoAP : une alternative légère à HTTP pour l’IoT Le protocole CoAP (Constrained Application Protocol) a été spécifiquement conçu pour répondre aux contraintes particulières de l’Internet des Objets (IoT) et des communications Machine-to-Machine (M2M). Ces contraintes sont principalement :\nUne puissance de calcul limitée des appareils Une consommation énergétique qui doit rester minimale Une bande passante réseau souvent restreinte CoAP peut être considéré comme l’équivalent de HTTP pour le monde des objets connectés, car il reprend de nombreux concepts et terminologies similaires, tout en les adaptant aux contraintes mentionnées :\nArchitecture RESTful avec des ressources accessibles via des URI Méthodes similaires à HTTP : GET, POST, DELETE, PUT (mais encodées au format binaire pour réduire la taille) Codes de retour comparables : 2.01, 2.03, 4.01, 4.03, 4.04 (également au format binaire) Principales fonctionnalités de CoAP Voici un aperçu des caractéristiques essentielles du protocole CoAP, telles que définies dans la RFC 7252 :\nProtocole RESTful implémentant l’ensemble des contraintes M2M Transport basé sur UDP avec gestion de confirmation, support unicast et multicast Sécurité intégrée via Datagram Transport Layer Security version 1.2 (DTLS) Support des URI et Content-types comme dans le monde web Mode Observe permettant les notifications push (sans polling) Empreinte réseau réduite grâce à des en-têtes et métadonnées au format binaire Intégration possible avec des mécanismes de proxy et de cache Passerelle transparente entre CoAP et HTTP Le standard LWM2M : une couche d’abstraction pour la gestion des objets connectés Le standard Lightweight M2M (LWM2M) développé par l’Open Mobile Alliance (OMA) ajoute une couche d’abstraction au-dessus du protocole CoAP. Cette couche permet de résoudre plusieurs problématiques spécifiques à la gestion des objets connectés déployés sur le terrain.\nEn effet, les appareils IoT déployés dans le monde physique doivent non seulement remplir leur fonction principale, mais aussi communiquer diverses informations de gestion et permettre des opérations de maintenance à distance. Par exemple, il est souvent nécessaire de :\nVérifier l’état de la batterie d’un capteur Redémarrer un appareil à distance Mettre à jour le firmware d’un dispositif Consulter ou modifier des paramètres de configuration Le standard LWM2M s’occupe également de la gestion complète du cycle de vie des objets déployés avec des mécanismes standardisés pour :\nLe provisionnement des appareils : configuration initiale et paramétrage\nL’enregistrement des appareils : découverte et intégration au système La gestion des appareils : contrôle et configuration à distance Les notifications de changement : alertes et mises à jour d’état Modèle de données LWM2M : Clients, Objects et Resources LWM2M définit un modèle de données hiérarchique clair pour organiser les fonctionnalités et informations des appareils connectés. Ce modèle s’articule autour de trois concepts fondamentaux :\nClient : représente l’appareil connecté lui-même (par exemple, un capteur de température, un GPS, etc.) Object : regroupe un ensemble cohérent de fonctionnalités ou d’informations liées à un même concept Resource : représente une donnée ou une action spécifique au sein d’un Object Par exemple, un GPS est un Client qui possède plusieurs Objects, chacun regroupant plusieurs Resources. Un Object peut représenter la localisation (avec des Resources comme longitude, latitude, altitude, horodatage), tandis qu’un autre Object peut contenir les informations sur l’appareil lui-même (numéro de modèle, numéro de série, version du firmware, niveau de batterie, etc.).\nLe serveur LWM2M peut interagir avec ces Resources de différentes manières :\nLecture de valeurs Écriture de paramètres Exécution d’actions (comme un redémarrage) Grâce à l’utilisation des URI, le serveur peut accéder précisément à l’information souhaitée :\n/3/0 pour accéder à toutes les informations de l’Object Device /3/0/2 pour accéder spécifiquement au numéro de série (Resource 2 de l’Object Device) Objects standardisés par l’OMA L’OMA a standardisé plusieurs Objects avec leurs Resources associées pour garantir l’interopérabilité entre les différentes implémentations :\nObject Name id singleton Security 0 false Server 1 false Access Control 2 false Device 3 true Connectivity Monitoring 4 true Firmware 5 true Location 6 true Connectivity Statistics 7 true Voici un exemple détaillé des Resources disponibles dans l’Object Connectivity Statistics :\nAttribut id type R/W/E units SMS Tx Counter 0 int R SMS Rx Counter 1 int R Tx Data 2 int R Kilo-Bytes Rx Data 3 int R Kilo-Bytes Max Message Size 4 int R Byte Average Message Size 5 int R Byte StartOrReset 5 E En complément des Objects définis par l’OMA, l’IPSO Alliance propose des Objects de plus haut niveau pour représenter des capteurs et actionneurs courants (GPIO analogique/numérique, capteur de luminosité, capteur de température, accéléromètre, etc.).\nVoici un exemple des Resources disponibles dans l’Object IPSO Illuminance (3301) :\nAttribut id type R/W/E units Min Measured Value 5601 float R Max Measured Value 5602 float R Min Range Value 5603 float R Max Range Value 5604 float R Reset Min and Max Measured Values 5605 E Sensor Value 5606 float R Sensor Units 5607 string R Mise en pratique avec Leshan : implémentation d’un client GPIO Passons maintenant à la partie pratique avec Leshan, l’implémentation de référence du standard LWM2M développée par la Fondation Eclipse.\nPour illustrer le fonctionnement, nous allons créer un client LWM2M simulant une broche GPIO numérique. La classe GPIOClient ci-dessous contient deux sous-classes importantes :\nDevice : représente les métadonnées de l’appareil physique GPIO : simule une broche de sortie numérique // Extrait de la classe GPIOClient public class GPIOClient { // Classe représentant les métadonnées de l'appareil private class Device extends BaseInstanceEnabler { private static final int MANUFACTURER = 0; private static final int MODEL_NUMBER = 1; private static final int SERIAL_NUMBER = 2; // ... autres constantes ... @Override public ReadResponse read(int resourceId) { switch (resourceId) { case MANUFACTURER: return ReadResponse.success(resourceId, \"Eclipse Leshan\"); case MODEL_NUMBER: return ReadResponse.success(resourceId, \"Model 500\"); case SERIAL_NUMBER: return ReadResponse.success(resourceId, \"LT-500-000-0001\"); // ... autres cas ... default: return super.read(resourceId); } } // ... autres méthodes ... } // Classe simulant une broche GPIO numérique private class GPIO extends BaseInstanceEnabler { private static final int STATE = 5500; private static final int POLARITY = 5501; private static final int APPLICATION_TYPE = 5750; private boolean state = false; private boolean polarity = false; private String applicationType = \"GPIO\"; @Override public ReadResponse read(int resourceId) { System.out.println(\"Read value \" + resourceId); switch (resourceId) { case STATE: return ReadResponse.success(resourceId, state); case POLARITY: return ReadResponse.success(resourceId, polarity); case APPLICATION_TYPE: return ReadResponse.success(resourceId, applicationType); default: return super.read(resourceId); } } @Override public WriteResponse write(int resourceId, LwM2mResource value) { System.out.println(\"Write value \" + resourceId + \" : \" + value.getValue()); switch (resourceId) { case STATE: state = (boolean) value.getValue(); return WriteResponse.success(); case POLARITY: polarity = (boolean) value.getValue(); return WriteResponse.success(); case APPLICATION_TYPE: applicationType = (String) value.getValue(); return WriteResponse.success(); default: return super.write(resourceId, value); } } } // ... méthode main et autres méthodes ... } Démonstration et captures d’écran Voici les résultats obtenus lors de l’exécution de notre client LWM2M avec le serveur Leshan :\nEnregistrement du client auprès du serveur Lecture de l’ensemble des ressources du client Warning\nL’instanciation de la GPIO / IPSO Digital Output se fait pour l’instant uniquement depuis le serveur via une requête CREATE. Cette fonctionnalité n’est pas encore disponible directement depuis le client.\nCréation d’un objet GPIO depuis le serveur Warning\nLes paramètres ne sont pas encore correctement envoyés lors de la création de l’objet. Il est nécessaire de les définir un par un après la création.\nModification des propriétés de l’objet GPIO Logs du client pendant l’interaction avec le serveur juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.config.NetworkConfig createStandardWithFile INFOS: Loading standard properties from file Californium.properties juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.CoapServer start INFOS: Starting server juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.CoAPEndpoint start INFOS: Starting endpoint at /0.0.0.0:0 Registered with id: /rd/FU6hLfHTXZ Write value state : true Write value polarity : false Write value applicationType : Ma nouvelle LED Read value state : true Read value state : false Read value applicationType : Ma nouvelle LED Warning\nAttention, le projet Leshan est encore en développement actif. Certaines fonctionnalités ne sont pas encore complètement implémentées ou peuvent présenter des limitations.\nConclusion : LWM2M, un standard prometteur pour l’IoT Le standard LWM2M basé sur le protocole CoAP offre une solution élégante à de nombreux défis de l’Internet des Objets. Il réalise un équilibre remarquable entre :\nLa simplicité et l’approche RESTful du monde web Les contraintes spécifiques des objets connectés (faible consommation énergétique, ressources limitées, bande passante restreinte) En conservant des concepts familiers du développement web (URI, ressources, méthodes HTTP-like), LWM2M facilite l’adoption par les développeurs déjà familiers avec les technologies web. La sécurité n’est pas négligée, avec l’intégration de mécanismes comme DTLS pour protéger les communications.\nL’un des points forts de LWM2M est sa standardisation des objets et ressources, qui favorise l’interopérabilité entre différents fabricants et solutions. Cette approche structurée permet de construire des écosystèmes IoT cohérents et évolutifs.\nPour la suite de mes travaux, je prévois d’intégrer le framework Leshan dans le projet Camel IoT Labs, ce qui permettra de connecter facilement des appareils LWM2M à d’autres systèmes d’entreprise via Apache Camel.\nLiens utiles pour approfondir Support de formation de Julien Vermillard - Présentation détaillée utilisée lors du training Documentation technique sur LWM2M - Ressource utilisée pour la rédaction de cet article Site officiel du protocole CoAP - Documentation et spécifications complètes Projet Leshan sur GitHub - Code source et documentation de l’implémentation Eclipse Registre des objets LWM2M de l’OMA - Liste officielle des objets standardisés ",
  "wordCount" : "1617",
  "inLanguage": "en",
  "datePublished": "2015-07-01T13:58:00Z",
  "dateModified": "2015-07-01T13:58:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://gautric.github.io/blog/2015/07/01/leshan-et-le-standard-lightweight-m2m-%C3%A0-leclipsecon/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Greg. I/O",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gautric.github.io/apple-icon-180x180.png"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://gautric.github.io/" accesskey="h" title="Greg. I/O (Alt + H)">
                <img src="https://gautric.github.io/apple-icon-180x180.png" alt="" aria-label="logo"
                    height="35">Greg. I/O</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://gautric.github.io/apropos/" title="À Propos">
                    <span>À Propos</span>
                </a>
            </li>
            <li>
                <a href="https://gautric.github.io/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://gautric.github.io/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://gautric.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://gautric.github.io/blog/">Blog</a></div>
    <h1 class="post-title entry-hint-parent">
      Leshan et le standard Lightweight M2M à l&#39;EclipseCon
    </h1>
    <div class="post-meta"><span title='2015-07-01 13:58:00 +0000 UTC'>July 1, 2015</span>

</div>
  </header> 
  <div class="post-content"><h1 id="découverte-du-protocole-lwm2m-pour-linternet-des-objets">Découverte du protocole LWM2M pour l&rsquo;Internet des Objets<a hidden class="anchor" aria-hidden="true" href="#découverte-du-protocole-lwm2m-pour-linternet-des-objets">#</a></h1>
<p>La semaine dernière, j&rsquo;ai eu l&rsquo;opportunité de participer à l&rsquo;<a href="https://www.eclipsecon.org/france2015/">EclipseCon</a> qui se déroulait à Toulouse. En tant que sponsor Bronze de cette édition, <a href="https://www.redhat.com">Red Hat</a> (mon entreprise) était présente avec <a href="https://www.flickr.com/groups/2812102@N25/pool/">un stand</a> pour échanger avec la communauté. C&rsquo;est dans ce cadre que j&rsquo;ai suivi une formation particulièrement enrichissante sur le protocole CoAP et <a href="https://www.eclipsecon.org/france2015/session/hands-lightweight-m2m-run-smartwatch-internet-things">le standard LWM2M</a> dispensée par <a href="http://people.apache.org/~jvermillard/">Julien Vermillard</a> de chez <a href="http://www.sierrawireless.com/">Sierra Wireless</a>, expert reconnu dans ce domaine.</p>
<h2 id="le-protocole-coap--une-alternative-légère-à-http-pour-liot">Le protocole CoAP : une alternative légère à HTTP pour l&rsquo;IoT<a hidden class="anchor" aria-hidden="true" href="#le-protocole-coap--une-alternative-légère-à-http-pour-liot">#</a></h2>
<p>Le protocole <a href="http://coap.technology/"><strong>CoAP</strong></a> (Constrained Application Protocol) a été spécifiquement conçu pour répondre aux contraintes particulières de l&rsquo;Internet des Objets (IoT) et des communications Machine-to-Machine (M2M). Ces contraintes sont principalement :</p>
<ul>
<li>Une puissance de calcul limitée des appareils</li>
<li>Une consommation énergétique qui doit rester minimale</li>
<li>Une bande passante réseau souvent restreinte</li>
</ul>
<p>CoAP peut être considéré comme l&rsquo;équivalent de HTTP pour le monde des objets connectés, car il reprend de nombreux concepts et terminologies similaires, tout en les adaptant aux contraintes mentionnées :</p>
<ul>
<li><strong>Architecture RESTful</strong> avec des ressources accessibles via des URI</li>
<li><strong>Méthodes similaires</strong> à HTTP : GET, POST, DELETE, PUT (mais encodées au format binaire pour réduire la taille)</li>
<li><strong>Codes de retour</strong> comparables : 2.01, 2.03, 4.01, 4.03, 4.04 (également au format binaire)</li>
</ul>
<h3 id="principales-fonctionnalités-de-coap">Principales fonctionnalités de CoAP<a hidden class="anchor" aria-hidden="true" href="#principales-fonctionnalités-de-coap">#</a></h3>
<p>Voici un aperçu des caractéristiques essentielles du protocole CoAP, telles que définies dans la <a href="https://tools.ietf.org/html/rfc7252">RFC 7252</a> :</p>
<ul>
<li><strong>Protocole RESTful</strong> implémentant l&rsquo;ensemble des contraintes M2M</li>
<li><strong>Transport basé sur UDP</strong> avec gestion de confirmation, support unicast et multicast</li>
<li><strong>Sécurité intégrée</strong> via Datagram Transport Layer Security version 1.2 (DTLS)</li>
<li><strong>Support des URI et Content-types</strong> comme dans le monde web</li>
<li><strong>Mode Observe</strong> permettant les notifications push (sans polling)</li>
<li><strong>Empreinte réseau réduite</strong> grâce à des en-têtes et métadonnées au format binaire</li>
<li><strong>Intégration possible</strong> avec des mécanismes de proxy et de cache</li>
<li><strong>Passerelle transparente</strong> entre CoAP et HTTP</li>
</ul>
<h2 id="le-standard-lwm2m--une-couche-dabstraction-pour-la-gestion-des-objets-connectés">Le standard LWM2M : une couche d&rsquo;abstraction pour la gestion des objets connectés<a hidden class="anchor" aria-hidden="true" href="#le-standard-lwm2m--une-couche-dabstraction-pour-la-gestion-des-objets-connectés">#</a></h2>
<p>Le standard Lightweight M2M (LWM2M) développé par l&rsquo;Open Mobile Alliance (OMA) ajoute une couche d&rsquo;abstraction au-dessus du protocole CoAP. Cette couche permet de résoudre plusieurs problématiques spécifiques à la gestion des objets connectés déployés sur le terrain.</p>
<p>En effet, les appareils IoT déployés dans le monde physique doivent non seulement remplir leur fonction principale, mais aussi communiquer diverses informations de gestion et permettre des opérations de maintenance à distance. Par exemple, il est souvent nécessaire de :</p>
<ul>
<li>Vérifier l&rsquo;état de la batterie d&rsquo;un capteur</li>
<li>Redémarrer un appareil à distance</li>
<li>Mettre à jour le firmware d&rsquo;un dispositif</li>
<li>Consulter ou modifier des paramètres de configuration</li>
</ul>
<p>Le standard LWM2M s&rsquo;occupe également de la gestion complète du cycle de vie des objets déployés avec des mécanismes standardisés pour :</p>
<ul>
<li>
<p><strong>Le provisionnement des appareils</strong> : configuration initiale et paramétrage</p>
</li>
<li>
<p><strong>L&rsquo;enregistrement des appareils</strong> : découverte et intégration au système
<img src="/img/RDR.png" style="max-width:100%;" height="110" hspace="30" alt="Diagramme d'enregistrement d'un appareil LWM2M"/></p>
</li>
<li>
<p><strong>La gestion des appareils</strong> : contrôle et configuration à distance
<img src="/img/RWE.png" style="max-width:100%;"  height="110" hspace="30" alt="Diagramme de gestion d'un appareil LWM2M"/></p>
</li>
<li>
<p><strong>Les notifications de changement</strong> : alertes et mises à jour d&rsquo;état
<img src="/img/ONCO.png" style="max-width:100%;" height="110" hspace="30" alt="Diagramme de notification de changement LWM2M"/></p>
</li>
</ul>
<h3 id="modèle-de-données-lwm2m--clients-objects-et-resources">Modèle de données LWM2M : Clients, Objects et Resources<a hidden class="anchor" aria-hidden="true" href="#modèle-de-données-lwm2m--clients-objects-et-resources">#</a></h3>
<p><a href="http://technical.openmobilealliance.org/Technical/technical-information/omna/lightweight-m2m-lwm2m-object-registry"><strong>LWM2M</strong></a> définit un modèle de données hiérarchique clair pour organiser les fonctionnalités et informations des appareils connectés. Ce modèle s&rsquo;articule autour de trois concepts fondamentaux :</p>
<ol>
<li><strong>Client</strong> : représente l&rsquo;appareil connecté lui-même (par exemple, un capteur de température, un GPS, etc.)</li>
<li><strong>Object</strong> : regroupe un ensemble cohérent de fonctionnalités ou d&rsquo;informations liées à un même concept</li>
<li><strong>Resource</strong> : représente une donnée ou une action spécifique au sein d&rsquo;un Object</li>
</ol>
<p>Par exemple, un GPS est un <em>Client</em> qui possède plusieurs <em>Objects</em>, chacun regroupant plusieurs <em>Resources</em>. Un <em>Object</em> peut représenter la localisation (avec des <em>Resources</em> comme longitude, latitude, altitude, horodatage), tandis qu&rsquo;un autre <em>Object</em> peut contenir les informations sur l&rsquo;appareil lui-même (numéro de modèle, numéro de série, version du firmware, niveau de batterie, etc.).</p>
<p>Le serveur LWM2M peut interagir avec ces <em>Resources</em> de différentes manières :</p>
<ul>
<li>Lecture de valeurs</li>
<li>Écriture de paramètres</li>
<li>Exécution d&rsquo;actions (comme un redémarrage)</li>
</ul>
<p>Grâce à l&rsquo;utilisation des URI, le serveur peut accéder précisément à l&rsquo;information souhaitée :</p>
<ul>
<li><code>/3/0</code> pour accéder à toutes les informations de l&rsquo;Object Device</li>
<li><code>/3/0/2</code> pour accéder spécifiquement au numéro de série (Resource 2 de l&rsquo;Object Device)</li>
</ul>
<h3 id="objects-standardisés-par-loma">Objects standardisés par l&rsquo;OMA<a hidden class="anchor" aria-hidden="true" href="#objects-standardisés-par-loma">#</a></h3>
<p>L&rsquo;OMA a standardisé plusieurs <em>Objects</em> avec leurs <em>Resources</em> associées pour garantir l&rsquo;interopérabilité entre les différentes implémentations :</p>
<table>
  <thead>
      <tr>
          <th>Object Name</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">singleton</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Security</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Server</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Access Control</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">false</td>
      </tr>
      <tr>
          <td>Device</td>
          <td style="text-align: center">3</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Connectivity Monitoring</td>
          <td style="text-align: center">4</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Firmware</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Location</td>
          <td style="text-align: center">6</td>
          <td style="text-align: center">true</td>
      </tr>
      <tr>
          <td>Connectivity Statistics</td>
          <td style="text-align: center">7</td>
          <td style="text-align: center">true</td>
      </tr>
  </tbody>
</table>
<br/>
<p>Voici un exemple détaillé des Resources disponibles dans l&rsquo;Object <strong>Connectivity Statistics</strong> :</p>
<table>
  <thead>
      <tr>
          <th>Attribut</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">type</th>
          <th style="text-align: center">R/W/E</th>
          <th style="text-align: right">units</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>SMS Tx Counter</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>SMS Rx Counter</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Tx Data</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Kilo-Bytes</td>
      </tr>
      <tr>
          <td>Rx Data</td>
          <td style="text-align: center">3</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Kilo-Bytes</td>
      </tr>
      <tr>
          <td>Max Message Size</td>
          <td style="text-align: center">4</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Byte</td>
      </tr>
      <tr>
          <td>Average Message Size</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center">int</td>
          <td style="text-align: center">R</td>
          <td style="text-align: right">Byte</td>
      </tr>
      <tr>
          <td>StartOrReset</td>
          <td style="text-align: center">5</td>
          <td style="text-align: center"></td>
          <td style="text-align: center">E</td>
          <td></td>
      </tr>
  </tbody>
</table>
<br/>
<p>En complément des Objects définis par l&rsquo;OMA, l&rsquo;IPSO Alliance propose des Objects de plus haut niveau pour représenter des capteurs et actionneurs courants (GPIO analogique/numérique, capteur de luminosité, capteur de température, accéléromètre, etc.).</p>
<p>Voici un exemple des Resources disponibles dans l&rsquo;Object <strong>IPSO Illuminance (3301)</strong> :</p>
<table>
  <thead>
      <tr>
          <th>Attribut</th>
          <th style="text-align: center">id</th>
          <th style="text-align: center">type</th>
          <th style="text-align: center">R/W/E</th>
          <th>units</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Min Measured Value</td>
          <td style="text-align: center">5601</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Max Measured Value</td>
          <td style="text-align: center">5602</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Min Range Value</td>
          <td style="text-align: center">5603</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Max Range Value</td>
          <td style="text-align: center">5604</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Reset Min and Max Measured Values</td>
          <td style="text-align: center">5605</td>
          <td style="text-align: center"></td>
          <td style="text-align: center">E</td>
          <td></td>
      </tr>
      <tr>
          <td>Sensor Value</td>
          <td style="text-align: center">5606</td>
          <td style="text-align: center">float</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
      <tr>
          <td>Sensor Units</td>
          <td style="text-align: center">5607</td>
          <td style="text-align: center">string</td>
          <td style="text-align: center">R</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h2 id="mise-en-pratique-avec-leshan--implémentation-dun-client-gpio">Mise en pratique avec Leshan : implémentation d&rsquo;un client GPIO<a hidden class="anchor" aria-hidden="true" href="#mise-en-pratique-avec-leshan--implémentation-dun-client-gpio">#</a></h2>
<p>Passons maintenant à la partie pratique avec <a href="https://github.com/eclipse/leshan"><em>Leshan</em></a>, l&rsquo;implémentation de référence du standard LWM2M développée par la <a href="https://eclipse.org/org/"><em>Fondation Eclipse</em></a>.</p>
<p>Pour illustrer le fonctionnement, nous allons créer un client LWM2M simulant une broche GPIO numérique. La classe <code>GPIOClient</code> ci-dessous contient deux sous-classes importantes :</p>
<ul>
<li><code>Device</code> : représente les métadonnées de l&rsquo;appareil physique</li>
<li><code>GPIO</code> : simule une broche de sortie numérique</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// Extrait de la classe GPIOClient</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GPIOClient</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Classe représentant les métadonnées de l&#39;appareil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Device</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseInstanceEnabler</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">MANUFACTURER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">MODEL_NUMBER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">SERIAL_NUMBER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ... autres constantes ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">ReadResponse</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">resourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">resourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">MANUFACTURER</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Eclipse Leshan&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">MODEL_NUMBER</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Model 500&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">SERIAL_NUMBER</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;LT-500-000-0001&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// ... autres cas ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">resourceId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ... autres méthodes ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Classe simulant une broche GPIO numérique</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GPIO</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseInstanceEnabler</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">STATE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">5500</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">POLARITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">5501</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">APPLICATION_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">5750</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">polarity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">applicationType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;GPIO&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">ReadResponse</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">resourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Read value &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">resourceId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">resourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">STATE</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">POLARITY</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="n">polarity</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">APPLICATION_TYPE</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">ReadResponse</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="n">applicationType</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">resourceId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">WriteResponse</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="n">LwM2mResource</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Write value &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">resourceId</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; : &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">resourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">STATE</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">WriteResponse</span><span class="p">.</span><span class="na">success</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">POLARITY</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">polarity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">WriteResponse</span><span class="p">.</span><span class="na">success</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="n">APPLICATION_TYPE</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">applicationType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">WriteResponse</span><span class="p">.</span><span class="na">success</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">resourceId</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ... méthode main et autres méthodes ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><script src="https://gist.github.com/gautric/9db1570898c3487f3829.js##file-gpioclient-java-L102"></script>
<h3 id="démonstration-et-captures-décran">Démonstration et captures d&rsquo;écran<a hidden class="anchor" aria-hidden="true" href="#démonstration-et-captures-décran">#</a></h3>
<p>Voici les résultats obtenus lors de l&rsquo;exécution de notre client LWM2M avec le serveur Leshan :</p>
<ol>
<li><strong>Enregistrement du client auprès du serveur</strong></li>
</ol>
<img src="/img/leshan_1.png" style="max-width:75%;" alt="Capture d'écran montrant l'enregistrement du client GPIO auprès du serveur Leshan"/>
<ol start="2">
<li><strong>Lecture de l&rsquo;ensemble des ressources du client</strong></li>
</ol>
<img src="/img/leshan_2.png" style="max-width:75%;" alt="Capture d'écran montrant les ressources disponibles sur le client GPIO"/>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>L&rsquo;instanciation de la GPIO / IPSO Digital Output se fait pour l&rsquo;instant uniquement depuis le serveur via une requête CREATE. Cette fonctionnalité n&rsquo;est pas encore disponible directement depuis le client.</p></div>

<ol start="3">
<li><strong>Création d&rsquo;un objet GPIO depuis le serveur</strong></li>
</ol>
<img src="/img/leshan_3.png" style="max-width:75%;" alt="Capture d'écran montrant la création d'un objet GPIO depuis l'interface du serveur"/>
<div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Les paramètres ne sont pas encore correctement envoyés lors de la création de l&rsquo;objet. Il est nécessaire de les définir un par un après la création.</p></div>

<ol start="4">
<li><strong>Modification des propriétés de l&rsquo;objet GPIO</strong></li>
</ol>
<img src="/img/leshan_5.png" style="max-width:75%;" alt="Capture d'écran montrant la modification des propriétés de l'objet GPIO"/>
<ol start="5">
<li><strong>Logs du client pendant l&rsquo;interaction avec le serveur</strong></li>
</ol>
<pre tabindex="0"><code class="language-log" data-lang="log">juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.config.NetworkConfig createStandardWithFile
INFOS: Loading standard properties from file Californium.properties
juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.CoapServer start
INFOS: Starting server
juil. 02, 2015 6:48:19 PM org.eclipse.californium.core.network.CoAPEndpoint start
INFOS: Starting endpoint at /0.0.0.0:0
Registered with id: /rd/FU6hLfHTXZ
Write value state : true
Write value polarity : false
Write value applicationType : Ma nouvelle LED
Read value state : true
Read value state : false
Read value applicationType : Ma nouvelle LED
</code></pre><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Attention, le projet Leshan est encore en développement actif. Certaines fonctionnalités ne sont pas encore complètement implémentées ou peuvent présenter des limitations.</p></div>

<h2 id="conclusion--lwm2m-un-standard-prometteur-pour-liot">Conclusion : LWM2M, un standard prometteur pour l&rsquo;IoT<a hidden class="anchor" aria-hidden="true" href="#conclusion--lwm2m-un-standard-prometteur-pour-liot">#</a></h2>
<p>Le standard <a href="http://technical.openmobilealliance.org/Technical/technical-information/omna/lightweight-m2m-lwm2m-object-registry"><strong>LWM2M</strong></a> basé sur le protocole <a href="http://coap.technology/"><strong>CoAP</strong></a> offre une solution élégante à de nombreux défis de l&rsquo;Internet des Objets. Il réalise un équilibre remarquable entre :</p>
<ul>
<li>La simplicité et l&rsquo;approche RESTful du monde web</li>
<li>Les contraintes spécifiques des objets connectés (faible consommation énergétique, ressources limitées, bande passante restreinte)</li>
</ul>
<p>En conservant des concepts familiers du développement web (URI, ressources, méthodes HTTP-like), LWM2M facilite l&rsquo;adoption par les développeurs déjà familiers avec les technologies web. La sécurité n&rsquo;est pas négligée, avec l&rsquo;intégration de mécanismes comme DTLS pour protéger les communications.</p>
<p>L&rsquo;un des points forts de LWM2M est sa standardisation des objets et ressources, qui favorise l&rsquo;interopérabilité entre différents fabricants et solutions. Cette approche structurée permet de construire des écosystèmes IoT cohérents et évolutifs.</p>
<p>Pour la suite de mes travaux, je prévois d&rsquo;intégrer le framework Leshan dans le projet <a href="https://github.com/camel-labs/camel-labs"><strong>Camel IoT Labs</strong></a>, ce qui permettra de connecter facilement des appareils LWM2M à d&rsquo;autres systèmes d&rsquo;entreprise via Apache Camel.</p>
<h3 id="liens-utiles-pour-approfondir">Liens utiles pour approfondir<a hidden class="anchor" aria-hidden="true" href="#liens-utiles-pour-approfondir">#</a></h3>
<ul>
<li><a href="http://fr.slideshare.net/jvermillard/hands-on-with-lightweight-m2m-and-leshan">Support de formation de Julien Vermillard</a> - Présentation détaillée utilisée lors du training</li>
<li><a href="http://fr.slideshare.net/zdshelby/oma-lightweightm2-mtutorial">Documentation technique sur LWM2M</a> - Ressource utilisée pour la rédaction de cet article</li>
<li><a href="http://coap.technology/">Site officiel du protocole CoAP</a> - Documentation et spécifications complètes</li>
<li><a href="https://github.com/eclipse/leshan">Projet Leshan sur GitHub</a> - Code source et documentation de l&rsquo;implémentation Eclipse</li>
<li><a href="http://technical.openmobilealliance.org/Technical/technical-information/omna/lightweight-m2m-lwm2m-object-registry">Registre des objets LWM2M de l&rsquo;OMA</a> - Liste officielle des objets standardisés</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://gautric.github.io/tags/fr/">Fr</a></li>
      <li><a href="https://gautric.github.io/tags/eclipsecon/">Eclipsecon</a></li>
      <li><a href="https://gautric.github.io/tags/coap/">CoAP</a></li>
      <li><a href="https://gautric.github.io/tags/leshan/">Leshan</a></li>
      <li><a href="https://gautric.github.io/tags/m2m/">M2M</a></li>
      <li><a href="https://gautric.github.io/tags/lightweight/">Lightweight</a></li>
      <li><a href="https://gautric.github.io/tags/toulouse/">Toulouse</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://gautric.github.io/blog/2015/07/03/wildfly-9.0-offline-cli-and-http/2/">
    <span class="title">« Prev</span>
    <br>
    <span>Wildfly 9.0 Offline CLI and HTTP/2</span>
  </a>
  <a class="next" href="https://gautric.github.io/blog/2015/06/18/java-regex-group-name/">
    <span class="title">Next »</span>
    <br>
    <span>Java Regex Group Name</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2016 - 2025 <a href="https://gautric.github.io/">Greg. I/O</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
